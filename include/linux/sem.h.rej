--- include/linux/sem.h
+++ include/linux/sem.h
@@ -102,6 +107,9 @@
 	struct list_head	sem_pending;	/* pending operations to be processed */
 	struct list_head	list_id;	/* undo requests on this array */
 	unsigned long		sem_nsems;	/* no. of semaphores in array */
+#ifdef CONFIG_KRG_IPC
+	struct list_head        remote_sem_pending;
+#endif
 };
 
 /* One queue for each sleeping process in the system. */
@@ -114,12 +122,20 @@
 	struct sembuf		*sops;	 /* array of pending operations */
 	int			nsops;	 /* number of operations */
 	int			alter;   /* does the operation alter the array? */
+#ifdef CONFIG_KRG_IPC
+	int                     semid;
+	kerrighed_node_t        node;
+#endif
 };
 
 /* Each task has a list of undo requests. They are executed automatically
  * when the process exits.
  */
 struct sem_undo {
+#ifdef CONFIG_KRG_IPC
+	unique_id_t             proc_list_id;
+	/* list_proc is useless in KRG code */
+#endif
 	struct list_head	list_proc;	/* per-process list: all undos from one process. */
 						/* rcu protected */
 	struct rcu_head		rcu;		/* rcu struct for sem_undo() */
